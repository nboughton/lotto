$(function(){function e(){return{start:$(r.dateStart).val(),end:$(r.dateEnd).val(),set:$(r.setSelect).val(),machine:$(r.machineSelect).val()}}function a(){$.getJSON("/api/results/average",e(),function(e){for($(r.results).empty().append('<h1 id="'+r.resultsAvg.replace("#","")+'" class="centered"></h1>'),i=0;i<e.length;i++)$(r.resultsAvg).append("<span class='num'>"+e[i]+"</span>")})}function t(){$.getJSON("/api/results/graph",e(),function(e){$.each(e.datasets,function(e,a){var t=l[a.label];a.backgroundColor=t.fill,a.borderColor=t.stroke,a.borderWidth=1.5,a.pointBorderColor="rgba(0,0,0,0)"}),$(r.results).empty().append('<canvas id="results-graph"></canvas>');new Chart($(r.resultsGraph),{type:"line",data:e})})}var r={machineSelect:"#filter-machine",setSelect:"#filter-set",dateClass:".form-date",dateStart:"#date-start",dateEnd:"#date-end",queryType:"#query-type",querySubmit:"#query-submit",results:"#results",resultsAvg:"#results-average",resultsGraph:"#results-graph"},l={"Ball 1":{fill:"rgba(255,0,132,0.05)",stroke:"rgba(255,0,132,1)"},"Ball 2":{fill:"rgba(156,0,255,0.05)",stroke:"rgba(156,0,255,1)"},"Ball 3":{fill:"rgba(54,0,255,0.05)",stroke:"rgba(54,0,255,1)"},"Ball 4":{fill:"rgba(0,84,255,0.05)",stroke:"rgba(0,84,255,1)"},"Ball 5":{fill:"rgba(0,186,255,0.05)",stroke:"rgba(0,186,255,1)"},"Ball 6":{fill:"rgba(0,255,30,0.05)",stroke:"rgba(0,255,30,1)"},"Bonus Ball":{fill:"rgba(255,0,0,0.05)",stroke:"rgba(255,0,0,1)"}};$.getJSON("/api/range",function(e){var a={format:"yyyy-mm-dd",selectYears:!0,selectMonths:!0,min:new Date(1e3*e.first),max:new Date(1e3*e.last)};$(r.dateClass).pickadate(a)}),$(r.machineSelect).change(function(e){var a={machine:$(r.machineSelect).val()};$.getJSON("/api/sets",a,function(e){var a=$(r.setSelect);a.empty().append('<option value="0">All</option>'),$.each(e,function(e,t){a.append('<option value="'+t+'">'+t+"</option>")})})}),$(r.querySubmit).click(function(e){switch($(r.queryType).val()){case"results/average":a();break;case"results/graph":t()}})});