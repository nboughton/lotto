$(function(){function e(){return{start:$(n.dateStart).val(),end:$(n.dateEnd).val(),set:$(n.setSelect).val(),machine:$(n.machineSelect).val()}}function t(){$.getJSON("/api/sets",e(),function(e){var t=$(n.setSelect);t.empty().append('<option value="0">All</option>'),$.each(e,function(e,s){t.append('<option value="'+s+'">'+s+"</option>")})})}function s(){$.getJSON("/api/machines",e(),function(e){var t=$(n.machineSelect);t.empty().append('<option value="all">All</option>'),$.each(e,function(e,s){t.append('<option value="'+s+'">'+s+"</option>")})})}function a(t){$.getJSON("/api/numbers",e(),function(e){var s=$(n.results);s.empty(),s.append("<table id='"+n.resultsNum.replace("#","")+"'></table>"),$(n.resultsNum).append("<thead><tr><td>Type</td><td>Ball 1</td><td>Ball 2</td><td>Ball 3</td><td>Ball 4</td><td>Ball 5</td><td>Ball 6</td><td>Bonus</td></tr></thead>"),$(n.resultsNum).append("<tr><td>Most Frequent</td>"+r(e.frequent)+"</tr>"),$(n.resultsNum).append("<tr><td>Least Frequent</td>"+r(e.least)+"</tr>"),$(n.resultsNum).append("<tr><td>Mean</td>"+r(e.meanAvg)+"</tr>"),$(n.resultsNum).append("<tr><td>Mode</td>"+r(e.modeAvg)+"</tr>"),$(n.resultsNum).append("<tr><td>Random</td>"+r(e.random)+"</tr>"),$(n.resultsNum).append("<tr><td>Ranges</td>"+r(e.ranges)+"</tr>"),t&&s.append("<p>"+t+"</p>")})}function r(e){var t="";return $.each(e,function(e,s){t+="<td class='num'>"+s+"</td>"}),t}function i(t,s){$.getJSON("/api/graph/"+t,e(),function(e){$(n.results).empty().append('<div id="'+n.resultsGraph.replace("#","")+'"></div>'),Plotly.newPlot(n.resultsGraph.replace("#",""),e,s)})}var n={machineSelect:"#filter-machine",setSelect:"#filter-set",dateClass:".form-date",dateStart:"#date-start",dateEnd:"#date-end",queryType:"#query-type",querySubmit:"#query-submit",results:"#results",resultsNum:"#results-numbers",resultsGraph:"#results-graph"},l={freqdist:{bar:{barmode:"stack",xaxis:{title:"Result"},yaxis:{title:"Frequency"}},scatter:{xaxis:{title:"Result"},yaxis:{title:"Frequency"}},ms:{xaxis:{title:"Machine"},yaxis:{title:"Set"},hovermode:"closest"}},timeseries:{line:{xaxis:{title:"Date:Set:Machine"},yaxis:{title:"Result"}}},scatter3D:{results:{scene:{xaxis:{title:"Machine"},yaxis:{title:"Set"},zaxis:{title:"Result"}}},frequency:{scene:{xaxis:{title:"Machine"},yaxis:{title:"Set"},zaxis:{title:"Frequency"}}}}},u="The bonus ball in each of these sets is treated as a separate entity from the first 6, however some deduplication is done to ensure that no duplicate numbers turn up in any of the sets. Where a duplicate would appear the next number in the relevant dataset is selected. Furthermore this analysis is purely for eductional use only. No conclusions should be drawn from this other than that it produces some interesting graphs.";$.getJSON("/api/range",function(e){var t={format:"yyyy-mm-dd",selectYears:!0,selectMonths:!0,min:new Date(1e3*e.first),max:new Date(1e3*e.last)};$(n.dateClass).pickadate(t)}),$(n.machineSelect).change(function(e){t()}),$(n.dateClass).change(function(e){s(),t()}),$(n.querySubmit).click(function(e){switch($(n.queryType).val()){case"num-results":a(u);break;case"graph-results-freqdist-bar":i("results/freqdist/bar",l.freqdist.bar);break;case"graph-results-freqdist-scatter":i("results/freqdist/scatter",l.freqdist.scatter);break;case"graph-results-timeseries-scatter":i("results/timeseries/scatter",l.timeseries.line);break;case"graph-results-timeseries-line":i("results/timeseries/line",l.timeseries.line);break;case"graph-results-raw-scatter3d":i("results/raw/scatter3d",l.scatter3D.results);break;case"graph-ms-freqdist-bubble":i("ms/freqdist/bubble",l.freqdist.ms);break;case"graph-ms-freqdist-scatter3d":i("ms/freqdist/scatter3d",l.scatter3D.frequency)}}),a(u)});